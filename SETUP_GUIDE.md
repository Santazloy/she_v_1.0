# –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ Shanghai Schedule v2.0

## –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ
1. [–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è](#—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è)
2. [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Supabase](#–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-supabase)
3. [–õ–æ–∫–∞–ª—å–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞](#–ª–æ–∫–∞–ª—å–Ω–∞—è-—É—Å—Ç–∞–Ω–æ–≤–∫–∞)
4. [–î–µ–ø–ª–æ–π –Ω–∞ Render](#–¥–µ–ø–ª–æ–π-–Ω–∞-render)
5. [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–æ–º–µ–Ω–∞](#–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-–¥–æ–º–µ–Ω–∞)
6. [–†–∞–±–æ—Ç–∞ —Å –ø—Ä–æ–µ–∫—Ç–æ–º](#—Ä–∞–±–æ—Ç–∞-—Å-–ø—Ä–æ–µ–∫—Ç–æ–º)

---

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Node.js 20+
- Git
- –ê–∫–∫–∞—É–Ω—Ç GitHub
- –ê–∫–∫–∞—É–Ω—Ç Supabase (–±–µ—Å–ø–ª–∞—Ç–Ω—ã–π)
- –ê–∫–∫–∞—É–Ω—Ç Render.com (–±–µ—Å–ø–ª–∞—Ç–Ω—ã–π)
- Telegram –±–æ—Ç (—Å–æ–∑–¥–∞—Ç—å —á–µ—Ä–µ–∑ @BotFather)

---

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Supabase

### 1. –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

1. –ó–∞–π–¥–∏—Ç–µ –Ω–∞ https://supabase.com
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç
3. –í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–≥–∏–æ–Ω (Singapore –¥–ª—è –ö–∏—Ç–∞—è)
4. –ó–∞–ø–æ–º–Ω–∏—Ç–µ –ø–∞—Ä–æ–ª—å –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### 2. –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü

–û—Ç–∫—Ä–æ–π—Ç–µ SQL Editor –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ `supabase_setup.sql`:

```sql
-- –û—Å–Ω–æ–≤–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è
CREATE TABLE IF NOT EXISTS schedule_data (
    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
    data_key TEXT UNIQUE NOT NULL DEFAULT 'main',
    schedule_data JSONB DEFAULT '{}',
    activity_log JSONB DEFAULT '[]',
    active_dates JSONB DEFAULT '[]',
    created_at TIMESTAMPTZ DEFAULT NOW(),
    updated_at TIMESTAMPTZ DEFAULT NOW()
);

-- –¢–∞–±–ª–∏—Ü–∞ –±–∞–ª–∞–Ω—Å–∞ –≥—Ä—É–ø–ø
CREATE TABLE IF NOT EXISTS work_balance (
    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
    chat_id TEXT UNIQUE NOT NULL,
    group_name TEXT NOT NULL,
    current_balance INTEGER DEFAULT 0,
    updated_at TIMESTAMPTZ DEFAULT NOW()
);

-- –¢–∞–±–ª–∏—Ü–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
CREATE TABLE IF NOT EXISTS work_transactions (
    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
    chat_id TEXT NOT NULL,
    group_name TEXT NOT NULL,
    amount INTEGER NOT NULL,
    operation TEXT NOT NULL,
    day_key TEXT NOT NULL,
    timestamp TIMESTAMPTZ DEFAULT NOW()
);
```

### 3. –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–ª—é—á–µ–π

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Settings ‚Üí API
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ:
   - **Project URL** ‚Üí `SUPABASE_URL`
   - **anon public key** ‚Üí `SUPABASE_ANON_KEY`

---

## –õ–æ–∫–∞–ª—å–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
git clone https://github.com/Santazloy/she_v_1.0.git
cd she_v_1.0
npm install
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ .env

```bash
cp .env.example .env
```

–ó–∞–ø–æ–ª–Ω–∏—Ç–µ `.env`:

```env
PORT=3000
NODE_ENV=development
TELEGRAM_BOT_TOKEN=–≤–∞—à_—Ç–æ–∫–µ–Ω_–±–æ—Ç–∞
SUPABASE_URL=https://xxxxx.supabase.co
SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIs...
```

### 3. –ó–∞–ø—É—Å–∫

```bash
npm start
```

–û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:3000

### 4. –ü—Ä–æ–≤–µ—Ä–∫–∞

```bash
curl http://localhost:3000/api/health
```

–î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å:
```json
{
  "status": "ok",
  "time": "2025-...",
  "bot": true
}
```

---

## –î–µ–ø–ª–æ–π –Ω–∞ Render

### 1. –°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞

1. –ó–∞–π–¥–∏—Ç–µ –Ω–∞ https://render.com
2. New ‚Üí Web Service
3. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ GitHub: `Santazloy/she_v_1.0`

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∏

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ó–Ω–∞—á–µ–Ω–∏–µ |
|----------|----------|
| Name | shanghai-schedule |
| Region | Singapore |
| Branch | main |
| Build Command | `./render-build.sh` |
| Start Command | `npm start` |

### 3. –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

| Key | Value |
|-----|-------|
| NODE_ENV | production |
| PORT | 10000 |
| TELEGRAM_BOT_TOKEN | –≤–∞—à_—Ç–æ–∫–µ–Ω |
| SUPABASE_URL | –≤–∞—à_url |
| SUPABASE_ANON_KEY | –≤–∞—à_–∫–ª—é—á |

### 4. –î–µ–ø–ª–æ–π

–ù–∞–∂–º–∏—Ç–µ "Create Web Service" –∏ –¥–æ–∂–¥–∏—Ç–µ—Å—å —Å–±–æ—Ä–∫–∏ (2-3 –º–∏–Ω—É—Ç—ã).

---

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–æ–º–µ–Ω–∞

### GoDaddy

1. DNS ‚Üí –¥–æ–±–∞–≤–∏—Ç—å CNAME –∑–∞–ø–∏—Å—å:
   - Name: `@` –∏–ª–∏ `www`
   - Value: `shanghai-schedule.onrender.com`
   - TTL: 600

2. –í Render: Settings ‚Üí Custom Domain ‚Üí Add `escortwork.org`

3. –ü–æ–¥–æ–∂–¥–∏—Ç–µ 15-60 –º–∏–Ω—É—Ç –¥–ª—è —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è DNS

---

## –†–∞–±–æ—Ç–∞ —Å –ø—Ä–æ–µ–∫—Ç–æ–º

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏

| –õ–æ–≥–∏–Ω | –ü–∞—Ä–æ–ª—å |
|-------|--------|
| kris | 12344321 |
| misha | 12344321 |
| katya | 12344321 |
| wang | 12344321 |
| lion | 12344321 |
| alexa | 090909 |
| bj | 121212 |

### –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å

- **–ó–∞–≥–æ–ª–æ–≤–æ–∫**: —á–∞—Å—ã, –∫–Ω–æ–ø–∫–∏ (+, -, –∂—É—Ä–Ω–∞–ª, –≤—ã—Ö–æ–¥)
- **–í–∫–ª–∞–¥–∫–∏**: 3 –¥–Ω—è (—Å–µ–≥–æ–¥–Ω—è, –∑–∞–≤—Ç—Ä–∞, –ø–æ—Å–ª–µ–∑–∞–≤—Ç—Ä–∞)
- **–¢–∞–±–ª–∏—Ü–∞**: —Å—Ç–æ–ª—ã √ó –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–ª–æ—Ç—ã
- **–ó–∞–º–µ—Ç–∫–∏**: –æ–±—â–∏–µ –¥–ª—è –≤—Å–µ—Ö –¥–Ω–µ–π

### –ö–Ω–æ–ø–∫–∏

| –ö–Ω–æ–ø–∫–∞ | –î–µ–π—Å—Ç–≤–∏–µ |
|--------|----------|
| + | –î–æ–±–∞–≤–∏—Ç—å —Å—Ç–æ–ª |
| - | –£–¥–∞–ª–∏—Ç—å —Å—Ç–æ–ª |
| üìã | –ñ—É—Ä–Ω–∞–ª –¥–µ–π—Å—Ç–≤–∏–π |
| üö™ | –í—ã—Ö–æ–¥ |

### Telegram –∫–æ–º–∞–Ω–¥—ã

- `/start` - –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ
- `/all` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–∏—Å—Ç–µ–º–µ

### –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è

–ö–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 4:00 AM (Shanghai):
- –ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∞—Ä–æ–≥–æ –¥–Ω—è
- –°–¥–≤–∏–≥ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è
- –û—Ç—á—ë—Ç –ø–æ –±–∞–ª–∞–Ω—Å—É

---

## Git workflow

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ

```bash
# –í–Ω–µ—Å—Ç–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Ñ–∞–π–ª—ã
git add .
git commit -m "–û–ø–∏—Å–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π"
git push
```

Render –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–∏—Ç—Å—è –∑–∞ 2-3 –º–∏–Ω—É—Ç—ã.

### –û—Ç–∫–∞—Ç

```bash
# –û—Ç–º–µ–Ω–∏—Ç—å –Ω–µ–∑–∞–∫–æ–º–º–∏—á–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
git checkout -- .

# –û—Ç–∫–∞—Ç–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–π –∫–æ–º–º–∏—Ç
git reset --soft HEAD~1
```

---

## –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –°–µ—Ä–≤–µ—Ä –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
npm start 2>&1 | head -50

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å .env
cat .env
```

### Telegram –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –±–æ—Ç –¥–æ–±–∞–≤–ª–µ–Ω –≤ –≥—Ä—É–ø–ø—ã
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ Render

### –î–∞–Ω–Ω—ã–µ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Supabase
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –≤ Supabase
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞

---

## –ö–æ–Ω—Ç–∞–∫—Ç—ã

- **GitHub**: https://github.com/Santazloy/she_v_1.0
- **Live**: https://escortwork.org